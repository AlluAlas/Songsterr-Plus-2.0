import{_ as e,i as t,v as a}from"./preact.89f2d999.js";import{z as s,n as r,K as i,bX as o,bY as n,c2 as l,c5 as c,c1 as p,bW as m,H as h,F as d,ad as u,ac as g,E as f,L as _,v}from"./index.0e02c5ee.js";import{P as y}from"./Panel.3ed0232a.js";import{t as b,s as w,a as S}from"./Section.fdb522b8.js";import{d as x}from"./user.151b6a3c.js";var j={title:b+" zg1xo",sectionSignup:w+" zgqj",actions:S+" zg244",terms:s+" zg2vm",termsLabel:"zg1ib"};class z extends e{__init(){this.name=t()}__init2(){this.email=t()}__init3(){this.password=t()}__init4(){this.terms=t()}constructor(e){super(e),z.prototype.__init.call(this),z.prototype.__init2.call(this),z.prototype.__init3.call(this),z.prototype.__init4.call(this),z.prototype.__init5.call(this),this.state={error:null,processing:!1}}__init5(){this.handleCreate=async e=>{e.preventDefault();const t=this.name.current,a=this.email.current,s=this.password.current,r=this.terms.current;try{i([{field:t,validator:o},{field:a,validator:n},{field:s,validator:l},{field:r,validator:c}]),this.setState({processing:!0,error:null});const e=await x(t.value,a.value,s.value);this.props.dispatch("user/signUp",e),this.setState({processing:!1,error:null}),this.props.dispatch("navigate",p(this.props.query.next))}catch(e){this.setState({processing:!1,error:e})}}}render(){m();const e=this.props.query.next,t=e?"?next=".concat(encodeURIComponent(e)):"",{error:s,processing:r}=this.state;return a(y,{title:"Sign Up",id:this.props.id},a("section",{className:j.sectionSignup,"data-section":"signup"},a("h2",{className:j.title},"Sign up for a free Songsterr Account"),a("form",{noValidate:!0,onSubmit:this.handleCreate,action:""},a(h,{error:s}),a(d,{ref:this.name,name:"name",type:"text",label:"Name",error:s,autocomplete:"name"}),a(d,{ref:this.email,name:"email",type:"email",label:"Email",error:s,autocomplete:"email"}),a(d,{ref:this.password,name:"password",type:"password",label:"Password",error:s,autocomplete:"new-password"}),a(u,{name:"terms",errorMessage:s&&g(s,"terms")}),a("label",{className:j.terms},a("input",{ref:this.terms,name:"terms",type:"checkbox"})," I agree to the ",a("a",{href:"/a/wa/terms",target:"_blank",rel:"license"},"Terms")," and ",a("a",{href:"/a/wa/privacy",target:"_blank",rel:"privacy"},"Privacy policy"),"."),a("div",{className:j.actions},a(f,{id:"signup",title:"Create an account",processing:r}),a(_,{to:"/a/wa/signin"+t,className:v.buttonLinkFloat,rel:"prev"},"Cancel")))))}}var N=r(z,"query");export{N as default};
//# sourceMappingURL=SignupPanel.223770ff.js.map
