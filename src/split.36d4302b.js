import{N as t,C as s,b as e,p as n,a as c,T as o,g as a,h as i,f as p,e as h,d as r}from"./types.1c7c7c24.js";const u="\\[(".concat(t,"|").concat(s,")\\]"),l=/[^ .,'\dXx\/|:;()-]+/;function g(t,s){for(const i of t.split("\n")){const t=[];let p=0;for(const s of i.matchAll(u,"g")){const[a,h]=s,r=i.substring(p,s.index);if(r.length){const s=!l.test(r);t.push({type:s?c:o,text:r})}t.push({type:e,chord:n(h)}),p=s.index+a.length}const h=i.substring(p);if(h.length){const s=!l.test(h);t.push({type:s?c:o,text:h})}t.length&&(t[t.length-1].type===e&&t.push({type:c,text:""}),s.push({type:a,line:t}))}}function f(t,s){let e=0;for(const n of t.matchAll(/\{([0-9A-Z_a-z]+):?((?:(?!\})[\s\S])*)?\}/gi)){g(t.substring(e,n.index),s);const[c,o,a]=n;switch(o){case"tuning":s.push({type:r,text:a.trim()});break;case"capo":s.push({type:h,text:a.trim()});break;case"section":s.push({type:p,text:a.trim()});break;case"c":case"comment":case"ci":case"comment_italic":case"gc":case"guitar_comment":s.push({type:i,text:a.trim()})}e=n.index+c.length}g(t.substring(e),s)}function m(t){const s=[];t=t.replace(/\{start_of_tab\}[\s\S]*?\{end_of_tab\}/gi,"").replace(/\{sot\}[\s\S]*?\{eot\}/gi,"").replace(/.*&copy.*\n?/gi,"");let n=0;for(const e of t.matchAll(/\{start_of_chorus\}([\s\S]*)\{end_of_chorus\}/gi))f(t.substring(n,e.index),s),s.push({type:p,text:"Chorus"}),f(e[1],s),n=e.index+e[0].length;return f(t.substring(n),s),function(t){t.forEach((t=>{if("line"===t.type&&t.line.some((t=>t.type===o))){const s=[];t.line.forEach((t=>{const n=s[s.length-1];void 0===n?s.push([t]):1===n.length?t.type===e?s.push([t]):n.push(t):s.push([t])})),t.blocks=s}}))}(s),s}export{l as CHORD_LINE_NOISE_REGEXP,u as LIGHT_CHORD_PATTERN,m as split,g as splitChords,f as splitDirectives};
//# sourceMappingURL=split.36d4302b.js.map
